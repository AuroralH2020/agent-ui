"use strict";(self.webpackChunkng_new_app=self.webpackChunkng_new_app||[]).push([[455],{4455:(I,u,r)=>{r.r(u),r.d(u,{TdEditorModule:()=>E});var n=r(1180),h=r(6814),a=r(1264),l=r(5118),f=r(5861),m=r(95),e=r(6689),p=r(9576),g=r(707),v=r(501);let Z=(()=>{class o{constructor(t,i,d,c){(0,n.Z)(this,"_config",void 0),(0,n.Z)(this,"_ref",void 0),(0,n.Z)(this,"_itemsService",void 0),(0,n.Z)(this,"_router",void 0),(0,n.Z)(this,"loading",!1),(0,n.Z)(this,"td",new m.NI("",{updateOn:"change",validators:[m.kI.required]})),(0,n.Z)(this,"tdStr",""),this._config=t,this._ref=i,this._itemsService=d,this._router=c;const S=t.data?.td;this.tdStr=JSON.stringify(S,null,2)}ngOnInit(){setTimeout(()=>{this.td.setValue(this.tdStr)},0)}createItem(){var t=this;return(0,f.Z)(function*(){if(t.td.valid){const i=t.td.value;t.loading=!0;try{yield t._itemsService.registerNewItem(JSON.parse(i)),t._ref.close(),t._router.navigateByUrl("/home/items/my-node")}finally{t.loading=!1}}})()}}return(0,n.Z)(o,"\u0275fac",function(t){return new(t||o)(e.Y36(l.S),e.Y36(l.E7),e.Y36(p.L),e.Y36(a.F0))}),(0,n.Z)(o,"\u0275cmp",e.Xpm({type:o,selectors:[["app-create-item"]],decls:4,vars:2,consts:[[2,"width","100%","height","calc(100vh - 256px)"],[3,"formControl"],[1,"flex","items-center","w-full","justify-end","mt-8"],["label","Create Item","icon","pi pi-plus",3,"loading","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-json-editor",1),e.TgZ(2,"div",2)(3,"p-button",3),e.NdJ("click",function(){return i.createItem()}),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formControl",i.td),e.xp6(2),e.Q6J("loading",i.loading))},dependencies:[g.zx,m.JJ,m.oH,v.T]})),o})();const T=[{path:"",component:(()=>{class o{constructor(t,i,d){(0,n.Z)(this,"_dialogService",void 0),(0,n.Z)(this,"_router",void 0),(0,n.Z)(this,"_zone",void 0),(0,n.Z)(this,"ref",void 0),this._dialogService=t,this._router=i,this._zone=d}onMessage(t){const i=t.data;i&&this._handle(i)}_handle(t){"string"==typeof t||t instanceof String?"close"===t&&this._router.navigateByUrl("/home/items/my-node"):t&&t.name&&t.td&&this._zone.run(()=>{this.ref=this._dialogService.open(Z,{width:"900px",height:"calc(100vh - 80px)",header:(t.name??"Item")+"'s Thing Desctiption",data:{td:t.td}})})}}return(0,n.Z)(o,"\u0275fac",function(t){return new(t||o)(e.Y36(l.xA),e.Y36(a.F0),e.Y36(e.R0b))}),(0,n.Z)(o,"\u0275cmp",e.Xpm({type:o,selectors:[["app-td-editor"]],hostBindings:function(t,i){1&t&&e.NdJ("message",function(c){return i.onMessage(c)},!1,e.Jf7)},features:[e._Bn([l.xA])],decls:2,vars:0,consts:[[1,"w-full","h-full"],["width","100%","height","100%","frameBorder","0","src","https://tdeditor.bavenir.eu/td-editor/sections/type?nodeUI=true"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"iframe",1),e.qZA())}})),o})()}];let C=(()=>{class o{}return(0,n.Z)(o,"\u0275fac",function(t){return new(t||o)}),(0,n.Z)(o,"\u0275mod",e.oAB({type:o})),(0,n.Z)(o,"\u0275inj",e.cJS({imports:[a.Bz.forChild(T),a.Bz]})),o})();var y=r(7603);let E=(()=>{class o{}return(0,n.Z)(o,"\u0275fac",function(t){return new(t||o)}),(0,n.Z)(o,"\u0275mod",e.oAB({type:o})),(0,n.Z)(o,"\u0275inj",e.cJS({imports:[h.ez,C,y.m]})),o})()}}]);