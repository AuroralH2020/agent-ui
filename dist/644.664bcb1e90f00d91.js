"use strict";(self.webpackChunkng_new_app=self.webpackChunkng_new_app||[]).push([[644],{1644:(B,l,s)=>{s.r(l),s.d(l,{ItemsModule:()=>R});var i=s(1180),r=s(1264),t=s(6689);let f=(()=>{class e{ngOnInit(){}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-items"]],decls:2,vars:0,consts:[[1,"w-full","h-full"]],template:function(n,m){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[r.lC]})),e})();var y=s(7582),d=s(8208),I=s(7398),c=s(9576),Z=s(5576),u=s(8925),C=s(5743),M=s(5861),g=s(5219),T=s(7555),S=s(707),U=s(1494);let A=(()=>{class e{constructor(n,m,h){(0,i.Z)(this,"_confirmationService",void 0),(0,i.Z)(this,"_itemsService",void 0),(0,i.Z)(this,"_snackbar",void 0),(0,i.Z)(this,"item",void 0),(0,i.Z)(this,"deleting",!1),this._confirmationService=n,this._itemsService=m,this._snackbar=h}deleteItem(n,m){this._confirmationService.confirm({target:m.target,message:`Are you sure that you want to delete the item: ${n.name}?`,icon:"pi pi-exclamation-triangle",accept:()=>{this._deleteItem(n)}}),m.stopPropagation()}_deleteItem(n){var m=this;return(0,M.Z)(function*(){m.deleting=!0;try{yield m._itemsService.removeItems([m.item.oid]),m._snackbar.showMessage(`Item: ${m.item.name} has been deleted`)}finally{m.deleting=!1}})()}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(g.YP),t.Y36(c.L),t.Y36(T.c))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-actions"]],inputs:{item:"item"},features:[t._Bn([g.YP])],decls:3,vars:1,consts:[[1,"flex","items-center","gap-4"],["icon","pi pi-trash","styleClass","p-button-rounded p-button-danger p-button-text",3,"loading","click"]],template:function(n,m){1&n&&(t.TgZ(0,"div",0)(1,"p-button",1),t.NdJ("click",function($){return m.deleteItem(m.item,$)}),t.qZA()(),t._UZ(2,"p-confirmPopup")),2&n&&(t.xp6(1),t.Q6J("loading",m.deleting))},dependencies:[S.zx,U.P]})),e})();var a,v=s(6814);function O(e,o){1&e&&(t.TgZ(0,"div",5),t._UZ(1,"app-node-pictogram")(2,"app-register-item-button"),t.qZA())}function F(e,o){1&e&&t._UZ(0,"app-actions",6),2&e&&t.Q6J("item",o.$implicit)}let p=((0,i.Z)(a=class{constructor(o,n){(0,i.Z)(this,"_itemsService",void 0),(0,i.Z)(this,"_activatedRoute",void 0),(0,i.Z)(this,"initialTypeFilter",void 0),this._itemsService=o,this._activatedRoute=n}ngOnInit(){this._activatedRoute.paramMap.pipe((0,d.t)(this)).pipe((0,I.U)(()=>window.history.state)).subscribe(o=>{this.initialTypeFilter=o.typeFilter})}get itemsUI$(){return this._itemsService.myItems$}},"\u0275fac",function(o){return new(o||a)(t.Y36(c.L),t.Y36(r.gz))}),(0,i.Z)(a,"\u0275cmp",t.Xpm({type:a,selectors:[["app-my-node-items"]],decls:8,vars:4,consts:[[1,"section","w-full","h-full"],[1,"pt-1","px-1"],["linkToDetail","/item-detail/node",3,"itemsUI","initialTypeFilter"],["header",""],["actions",""],[1,"flex","items-center","gap-4"],[3,"item"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-items-table",2),t.ALo(3,"async"),t.YNc(4,O,3,0,"ng-template",null,3,t.W1O),t.YNc(6,F,1,1,"ng-template",null,4,t.W1O),t.qZA()()()),2&o&&(t.xp6(2),t.Q6J("itemsUI",t.lcZ(3,2,n.itemsUI$))("initialTypeFilter",n.initialTypeFilter))},dependencies:[Z.q,u._,C.z,A,v.Ov]})),a);p=(0,y.gn)([(0,d.c)()],p);var Y=s(8998),x=s(81);function N(e,o){if(1&e&&t._UZ(0,"app-org-pictogram",4),2&e){const n=t.oxw();t.Q6J("minWidth",126)("organisation",n.organisation)}}const J=[{path:"",component:f,children:[{path:"my-node",component:p},{path:"my-org",component:(()=>{class e{constructor(n,m){(0,i.Z)(this,"_itemsService",void 0),(0,i.Z)(this,"_nodesService",void 0),(0,i.Z)(this,"itemsUI",[]),this._itemsService=n,this._nodesService=m}ngOnInit(){this.itemsUI=this._itemsService.myOrgItems??[]}get organisation(){return this._nodesService.myNode.organisation}}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)(t.Y36(c.L),t.Y36(Y.Z))}),(0,i.Z)(e,"\u0275cmp",t.Xpm({type:e,selectors:[["app-my-org-items"]],decls:5,vars:1,consts:[[1,"section","w-full","h-full"],[1,"pt-1","px-1"],["linkToDetail","/item-detail/myorg",3,"itemsUI"],["header",""],[3,"minWidth","organisation"]],template:function(n,m){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-items-table",2),t.YNc(3,N,1,2,"ng-template",null,3,t.W1O),t.qZA()()()),2&n&&(t.xp6(2),t.Q6J("itemsUI",m.itemsUI))},dependencies:[x.C,u._]})),e})()}]}];let z=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[r.Bz.forChild(J),r.Bz]})),e})();var P=s(7603);let R=(()=>{class e{}return(0,i.Z)(e,"\u0275fac",function(n){return new(n||e)}),(0,i.Z)(e,"\u0275mod",t.oAB({type:e})),(0,i.Z)(e,"\u0275inj",t.cJS({imports:[v.ez,P.m,z]})),e})()}}]);