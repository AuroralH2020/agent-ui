<div class="grow mt-4">
  <form [formGroup]="form">
    <div class="grid grid-cols-12 gap-10">
      <div class="col-span-7">
        <div>
          <div class="item-label pb-2">{{ title }}:</div>
          <app-sparql-editor
            formControlName="query"
            style="width: 100%; height: calc(100vh - 344px)"
          ></app-sparql-editor>
        </div>
        <div class="mt-4 ml-2">
          <p-button
            label="Execute query"
            icon="pi pi-database"
            (click)="executeQuery()"
            [loading]="loading"
            [style]="{ width: '160px' }"
          ></p-button>
        </div>
      </div>
      <div class="col-span-5">
        <div class="w-full" style="padding-top: 2px">
          <p-fieldset legend="Result" [ngClass]="['w-full', queryResult ? ' custom-fieldset' : '']">
            <div class="w-full" [style]="queryResult ? 'height: calc(100vh - 388px)' : 'height: calc(100vh - 404px)'">
              <div *ngIf="loading" class="h-full w-full flex flex-col justify-center items-center">
                <app-spinner></app-spinner>
              </div>
              <div [hidden]="loading" class="w-full h-full relative">
                <div *ngIf="!queryResult" class="h-full w-full flex flex-col justify-center items-center gap-2">
                  <app-sad-face></app-sad-face>
                  <div>No result</div>
                  <div class="text-text-300 text-sm w-60 text-center">
                    To see the result, type and execute the query
                  </div>
                </div>
                <app-json-editor
                  formControlName="result"
                  [hidden]="!queryResult"
                  [fontSize]="12"
                  [showGutter]="false"
                  [readOnly]="true"
                  style="width: 100%; height: 100%"
                ></app-json-editor>
                <div *ngIf="queryResult && !loading" class="absolute -top-11 right-4">
                  <p-button icon="pi pi-window-maximize" styleClass="p-button-rounded p-button-text" (click)="expandResult()"></p-button>
                </div>
              </div>
            </div>
          </p-fieldset>
        </div>
      </div>
    </div>
  </form>
</div>
