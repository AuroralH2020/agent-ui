<div class="cursor-pointer px-3 py-2" [matMenuTriggerFor]="menu">
  <div *ngIf="isLoggedIn; else elseBlock">
    <app-avatar
      [photoUrl]="photo"
      name="bAvenir"
      [size]="32"
    ></app-avatar>
  </div>
  <ng-template #elseBlock
    ><mat-icon class="align-middle opacity-60"
      >account_circle</mat-icon
    ></ng-template
  >
</div>
<mat-menu #menu="matMenu" md-prevent-menu-close="md-prevent-menu-close">
  <div
    class="text-center menu-container text-primary-200 p-4 flex flex-col justify-center items-center"
  >
    <div *ngIf="isLoggedIn; else elseBlock">
      <app-avatar
        [photoUrl]="photo"
        name="bAvenir"
        [size]="60"
        [showTooltip]="false"
      ></app-avatar>
    </div>
    <ng-template #elseBlock><mat-icon>account_circle</mat-icon></ng-template>
    <div class="mat-body-1 text-primary-300 mt-1">
      {{ profile?.name ?? "No account" }}
    </div>
    <div style="height: 4px"></div>
    <div class="text-small w-32 leading-3">
      {{ isLoggedIn ? profile?.email : "Please sign in or create an account" }}
    </div>
    <div class="h-4"></div>
    <div class="flex flex-col">
      <app-button
        text="Profile"
        type="mat-flat-button"
        theme="primary"
        size="medium"
        class="opacity-80"
      ></app-button>
      <app-button
        text="Log out"
        type="mat-button"
        theme="accent"
        size="medium"
        [loading]="loading"
        (click)="$event.stopPropagation(); logout()"
      ></app-button>
    </div>
  </div>
</mat-menu>
